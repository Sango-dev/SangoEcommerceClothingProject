<!DOCTYPE html>
<html
        lang="en"
        xmlns:th="http://www.w3.org/1999/xhtml"
        xmlns:sec="http://www.w3.org/1999/xhtml"
>
<head>
    <meta charset="UTF-8"/>
    <title>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</title>
    <head th:replace="fragments/header :: header-css"></head>
</head>
<div th:replace="fragments/header :: header"></div>
<body class="bg-neutral-100">
<div class="h-screen flex justify-center">
    <form
            th:action="@{/users/new}"
            method="post"
            th:object="${user}"
            class="w-86 m-auto flex flex-col border p-2 bg-white"
    >
        <h2 class="mt-2 text-2xl font-bold text-center">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
        <input
                type="text"
                id="nickName"
                th:field="*{nickName}"
                th:value="${nickName}"
                required
                placeholder="–ù—ñ–∫"
                class="w-full px-3 py-1 outline-0 border-b focus:border-blue-400 my-3"
        />
        <input
                type="text"
                id="firstName"
                th:field="*{firstName}"
                th:value="${firstName}"
                required="true"
                autofocus="true"
                placeholder="–Ü–º'—è"
                class="w-full px-3 py-1 outline-0 border-b focus:border-blue-400 my-3"
        />
        <input
                type="text"
                id="lastName"
                th:field="*{lastName}"
                th:value="${lastName}"
                required="true"
                placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ"
                class="w-full px-3 py-1 outline-0 border-b focus:border-blue-400 my-3"
        />
        <input
                type="email"
                id="email"
                th:field="*{email}"
                th:value="${email}"
                required="true"
                placeholder="–ü–æ—à—Ç–∞"
                class="w-full px-3 py-1 outline-0 border-b focus:border-blue-400 my-3"
        />
        <input
                type="tel"
                id="phone"
                th:field="*{phone}"
                th:value="${phone}"
                required="true"
                placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"
                class="w-full px-3 py-1 outline-0 border-b focus:border-blue-400 my-3"
        />

        <div>
            <input
                    type="password"
                    id="password"
                    th:field="*{password}"
                    th:value="${password}"
                    required
                    placeholder="–ü–∞—Ä–æ–ª—å"
                    class="password w-72 px-3 py-1 outline-0 border-b focus:border-blue-400 my-3"
            />
            <button type="button" class="wiev-password text-xl">üëÅ</button>
        </div>
        <div>
            <input
                    type="password"
                    id="matchingPassword"
                    th:field="*{matchingPassword}"
                    th:value="${matchingPassword}"
                    required
                    placeholder="–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è"
                    class="password w-72 px-3 py-1 outline-0 border-b focus:border-blue-400 my-3"
            />
            <button type="button" class="wiev-password text-xl">üëÅ</button>
        </div>

        <div th:if="${errorFlag}">
            <p th:text="${errorMessage}" class="text-red-600 text-sm"></p>
        </div>
        <button
                type="submit"
                class="mt-4 flex justify-center p-3 text-white bg-neutral-800 font-bold hover:opacity-50 cursor-pointer"
        >
            –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è
        </button>

        <div
                sec:authorize="!hasAnyAuthority('ADMIN')"
                class="my-5 flex mx-auto"
        >
            –£ –≤–∞—Å –≤–∂–µ —î –∞–∫–∫–∞—É–Ω—Ç
            <a
                    href="/login"
                    class="underline text-indigo-700 cursor-pointer hover:text-indigo-900 mx-1"
            >–≤–≤—ñ–π–¥—ñ—Ç—å</a
            >
        </div>
    </form>
</div>

<script>
    const pswBtn = document.querySelectorAll(".wiev-password");
    const psw = document.querySelectorAll(".password");

    const types = {
        text: "text",
        password: "password",
    };

    [...pswBtn].forEach((btn, index) =>
        btn.addEventListener("click", () => {
            if (psw[index].type === types.password) {
                btn.innerHTML = "ü´£";
                psw[index].type = types.text;
            } else {
                btn.innerHTML = "üëÅ";
                psw[index].type = types.password;
            }
        })
    );
</script>
</body>
</html>

