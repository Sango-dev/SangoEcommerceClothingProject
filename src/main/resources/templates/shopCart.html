<!--
<!DOCTYPE html>
<html
        lang="en"
        xmlns:th="http://www.w3.org/1999/xhtml"
        xmlns:sec="http://www.w3.org/1999/xhtml"
>
<head>
    <title>Bucket</title>
    &lt;!&ndash; <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> &ndash;&gt;
    <script src="https://cdn.tailwindcss.com"></script>

    &lt;!&ndash;<script>
        $(document).on("click", ".del-full-btn", function() {
            var id = $(this).data("id");
            var size = $(this).data("size");
            console.log(id + " " + size);
            $.ajax({
                url: "/shop-cart/removeItem",
                type: "POST",
                data: {
                    "id": id,
                    "size": size
                },
                success: function(result) {
                    $("#cart").find("[data-id='" + id + "'][data-size='" + size + "']").closest("tr").remove();
                },
                error: function(xhr, status, error) {
                    // handle error
                }
            });
        });
    </script>&ndash;&gt;
</head>
<body>
<header
        class="w-full h-[80px] bg-neutral-200 grid justify-items-stretch grid-cols-3"
>
    <div sec:authorize="isAuthenticated()" class="my-auto px-2 text-2xl">
        Hello, <span sec:authentication="principal.username">Billi</span>
    </div>
    <div
            class="justify-self-center text-4xl my-auto text-red-500 font-mono font-bold"
    >
        SanGo
    </div>
    <div
            sec:authorize="isAuthenticated()"
            class="justify-self-end mx-2 my-auto text-2xl"
    >
        <a th:href="@{/logout}" class="mx-2">logout</a>
        <a th:href="@{/shop-cart}" class="basket mx-2 no-underline"> üõí </a>
    </div>
</header>

<div class="w-[100wh] h-fit">
    <div class="flex flex-col">
        <div class="text-4xl font-bold text-neutral-800 text-center my-10">
            Shopping bag
        </div>
        <div
                th:if="${!cart.cartDetails.isEmpty()}"
                class="mt-7 mx-auto w-fit h-fit bg-neutral-100 p-5 flex justify-center"
        >
            <div class="w-[700px]">
                &lt;!&ndash;Tovar card&ndash;&gt;
                <div
                        id="cart"
                        th:each="detail : ${cart.cartDetails}"
                        class="flex w-full h-fit bg-white p-3"
                >
                    <div class="w-[100px] h-[200px] mr-5">
                        <img
                                src="https://picsum.photos/100/200"
                                th:src="@{${detail.linkOfPicture}}"
                                class="image"
                        />
                    </div>
                    <div class="w-full">
                        <div class="w-full flex justify-between">
                            <div>
                                <div th:text="${detail.title}" class="font-bold">
                                    Vendor Code
                                </div>
                                <div class="flex text-xl">
                                    <div th:text="${detail.price}">123</div>
                                    <div>$</div>
                                </div>
                            </div>
                            <form th:action="@{shop-cart/removeItem}" method="post">
                                <input
                                        type="hidden"
                                        name="id"
                                        th:value="${detail.productInstanceId}"
                                />
                                <input
                                        type="hidden"
                                        name="size"
                                        th:value="${detail.size}"
                                />
                                <button type="submit" class="text-2xl">‚ùå</button>
                            </form>
                        </div>
                        <div class="text-sm flex mt-[25px]">
                            <div>
                                <div class="flex">
                                    Art.No.
                                    <div class="mx-2" th:text="${detail.size}">
                                        0942075022
                                    </div>
                                </div>
                                <div class="flex">
                                    Total sum
                                    <div class="mx-2" th:text="${detail.sum + '$'}">19$</div>
                                </div>
                            </div>

                            <div class="flex bg-neutral-200 mx-10 text-xl rounded-lg">
                                <form th:action="@{shop-cart/incamount}" method="post">
                                    <input
                                            type="hidden"
                                            name="id"
                                            th:value="${detail.productInstanceId}"
                                    />
                                    <input
                                            type="hidden"
                                            name="size"
                                            th:value="${detail.size}"
                                    />
                                    <button type="submit" class="w-10 h-10 hover:opacity-30">
                                        <div class="m-auto" title="add one">+</div>
                                    </button>
                                </form>
                                <div class="m-auto">
                                    <div th:text="${detail.amount}">1</div>
                                </div>

                                <form th:action="@{shop-cart/decamount}" method="post">
                                    <input
                                            type="hidden"
                                            name="id"
                                            th:value="${detail.productInstanceId}"
                                    />
                                    <input
                                            type="hidden"
                                            name="size"
                                            th:value="${detail.size}"
                                    />
                                    <button
                                            type="submit"
                                            class="w-10 h-10 hover:opacity-30"
                                            title="minus one"
                                    >
                                        <div class="m-auto">-</div>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                &lt;!&ndash;End tovar card&ndash;&gt;
            </div>

            <div class="fixed right-[150px] w-96 bg-neutral-100 p-10">
                <form th:action="@{/shop-cart}" method="post" class="flex flex-col">
                    &lt;!&ndash;<button class="btn btn-info" type="submit" name="submit">Create Order</button>
                    <button class="btn btn-danger" type="submit" name="clear">Clear Cart</button>&ndash;&gt;
                    <div
                            sec:authorize="isAuthenticated()"
                            class="flex flex-col gap-3"
                    >
                        <button
                                class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                                type="submit"
                                name="store"
                        >
                            Save Cart
                        </button>
                        <button
                                class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                                type="submit"
                                name="load"
                        >
                            Load Cart
                        </button>
                        <button
                                class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                                type="submit"
                                name="confirm-order"
                        >
                            Create Order
                        </button>
                        <button
                                class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                                type="submit"
                                name="clear"
                        >
                            Clear Cart
                        </button>
                    </div>

                    <div sec:authorize="!isAuthenticated()" class="m-auto my-3">
                        <div>
                            To make a purchase, please
                            <a
                                    href="/*"
                                    class="underline text-blue-600 hover:text-indigo-800"
                            >Login</a
                            >
                        </div>

                        &lt;!&ndash;Link to login&ndash;&gt;
                    </div>

                    <div class="flex p-2 text-xl font-bold justify-between">
                        <div class="mx-2">Total:</div>
                        <p th:text="${totalPrice + '$'}">124$</p>
                    </div>
                </form>
            </div>
        </div>

        &lt;!&ndash;Empty bag&ndash;&gt;
        <div
                th:unless="${cart.cartDetails.isEmpty()}"
                class="text-2xl w-fit mt-10 mx-auto bg-neutral-100 p-5"
        >
            Bag is empty
            <a class="text-indigo-700 underline hover:text-indigo-800" href="/"
            >make a purchase</a
            >
            &lt;!&ndash;Add path to home page&ndash;&gt;
        </div>
        &lt;!&ndash;End empty bag&ndash;&gt;
    </div>
</div>

&lt;!&ndash; <div th:if="${!cart.cartDetails.isEmpty()}">
  <table>
    <tr align="center">
      <th>Picture</th>
      <th>Title</th>
      <th>Size</th>
      <th>Price</th>
      <th>Amount</th>
      <th>Total</th>
      <th>Plus One</th>
      <th>Del One</th>
      <th>Del full</th>
    </tr>
    <tr id="cart" th:each="detail : ${cart.cartDetails}">
      <td><img th:src="@{${detail.linkOfPicture}}" class="image" /></td>
      <td th:text="${detail.title}">Vendor Code</td>
      <td th:text="${detail.size}">Vendor Code</td>
      <td th:text="${detail.price}">Title</td>
      <td th:text="${detail.amount}">Description</td>
      <td th:text="${detail.sum}" align="right">Price</td>
      <th>
        <form th:action="@{shop-cart/incamount}" method="post">
          <input
            type="hidden"
            name="id"
            th:value="${detail.productInstanceId}"
          />
          <input type="hidden" name="size" th:value="${detail.size}" />
          <button type="submit">Plus One</button>
        </form>
      </th>
      <th>
        <form th:action="@{shop-cart/decamount}" method="post">
          <input
            type="hidden"
            name="id"
            th:value="${detail.productInstanceId}"
          />
          <input type="hidden" name="size" th:value="${detail.size}" />
          <button type="submit">Minus One</button>
        </form>
      </th>
      <th>
        <form th:action="@{shop-cart/removeItem}" method="post">
          <input
            type="hidden"
            name="id"
            th:value="${detail.productInstanceId}"
          />
          <input type="hidden" name="size" th:value="${detail.size}" />
          <button type="submit">Del Ful</button>
        </form>
      </th>
    </tr>
  </table>
  <div class="">
    <p th:text="${totalPrice}"></p>
  </div>
</div> &ndash;&gt;
</body>
</html>

-->

<!DOCTYPE html>
<html
        lang="en"
        xmlns:th="http://www.w3.org/1999/xhtml"
        xmlns:sec="http://www.w3.org/1999/xhtml"
>
<head>
    <title>Bucket</title>
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!--<script>
        $(document).on("click", ".del-full-btn", function() {
            var id = $(this).data("id");
            var size = $(this).data("size");
            console.log(id + " " + size);
            $.ajax({
                url: "/shop-cart/removeItem",
                type: "POST",
                data: {
                    "id": id,
                    "size": size
                },
                success: function(result) {
                    $("#cart").find("[data-id='" + id + "'][data-size='" + size + "']").closest("tr").remove();
                },
                error: function(xhr, status, error) {
                    // handle error
                }
            });
        });
    </script>-->
</head>
<body>
<header
        class="w-full h-[80px] bg-neutral-200 grid justify-items-stretch grid-cols-3"
>
    <div sec:authorize="isAuthenticated()" class="my-auto px-2 text-2xl">
        Hello, <span sec:authentication="principal.username">Billi</span>
    </div>
    <div
            class="justify-self-center text-4xl my-auto text-red-500 font-mono font-bold"
    >
        SanGo
    </div>
    <div
            sec:authorize="isAuthenticated()"
            class="justify-self-end mx-2 my-auto text-2xl"
    >
        <a th:href="@{/logout}" class="mx-2">logout</a>
        <a th:href="@{/shop-cart}" class="basket mx-2 no-underline"> üõí </a>
    </div>
</header>

<div class="w-[100wh] h-fit">
    <div class="flex flex-col">
        <div class="text-4xl font-bold text-neutral-800 text-center my-10">
            Shopping bag
        </div>
        <div
                th:if="${!cart.cartDetails.isEmpty()}"
                class="mt-7 mx-auto w-fit h-fit bg-neutral-100 p-5 flex justify-center"
        >
            <div class="w-[700px]">
                <!--Tovar card-->
                <div
                        id="cart"
                        th:each="detail : ${cart.cartDetails}"
                        class="flex w-full h-fit bg-white p-3"
                >
                    <div class="w-[100px] h-[200px] mr-5">
                        <img
                                src="https://picsum.photos/100/200"
                                th:src="@{${detail.linkOfPicture}}"
                                class="image"
                        />
                    </div>
                    <div class="w-full">
                        <div class="w-full flex justify-between">
                            <div>
                                <div th:text="${detail.title}" class="font-bold">
                                    Vendor Code
                                </div>
                                <div class="flex text-xl">
                                    <div th:text="${detail.price}">123</div>
                                    <div>$</div>
                                </div>
                            </div>
                            <form th:action="@{shop-cart/removeItem}" method="post">
                                <input
                                        type="hidden"
                                        name="id"
                                        th:value="${detail.productInstanceId}"
                                />
                                <input
                                        type="hidden"
                                        name="size"
                                        th:value="${detail.size}"
                                />
                                <button type="submit" class="text-2xl">‚ùå</button>
                            </form>
                        </div>
                        <div class="text-sm flex mt-[25px]">
                            <div>
                                <div class="flex">
                                    Art.No.
                                    <div class="mx-2" th:text="${detail.size}">
                                        0942075022
                                    </div>
                                </div>
                                <div class="flex">
                                    Total sum
                                    <div class="mx-2" th:text="${detail.sum + '$'}">19$</div>
                                </div>
                            </div>

                            <div class="flex bg-neutral-200 mx-10 text-xl rounded-lg">
                                <form th:action="@{shop-cart/incamount}" method="post">
                                    <input
                                            type="hidden"
                                            name="id"
                                            th:value="${detail.productInstanceId}"
                                    />
                                    <input
                                            type="hidden"
                                            name="size"
                                            th:value="${detail.size}"
                                    />
                                    <button type="submit" class="w-10 h-10 hover:opacity-30">
                                        <div class="m-auto" title="add one">+</div>
                                    </button>
                                </form>
                                <div class="m-auto">
                                    <div th:text="${detail.amount}">1</div>
                                </div>

                                <form th:action="@{shop-cart/decamount}" method="post">
                                    <input
                                            type="hidden"
                                            name="id"
                                            th:value="${detail.productInstanceId}"
                                    />
                                    <input
                                            type="hidden"
                                            name="size"
                                            th:value="${detail.size}"
                                    />
                                    <button
                                            type="submit"
                                            class="w-10 h-10 hover:opacity-30"
                                            title="minus one"
                                    >
                                        <div class="m-auto">-</div>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!--End tovar card-->
            </div>
        </div>
        <div class="fixed right-[150px] top-[200px] w-96 bg-neutral-100 p-10">
            <form th:action="@{/shop-cart}" method="post" class="flex flex-col">
                <!--<button class="btn btn-info" type="submit" name="submit">Create Order</button>
                <button class="btn btn-danger" type="submit" name="clear">Clear Cart</button>-->
                <div
                        sec:authorize="isAuthenticated()"
                        class="flex flex-col gap-3"
                >
                    <button
                            class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                            type="submit"
                            name="store"
                    >
                        Save Cart
                    </button>
                    <button
                            class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                            type="submit"
                            name="load"
                    >
                        Load Cart
                    </button>
                    <button
                            class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                            type="submit"
                            name="confirm-order"
                    >
                        Create Order
                    </button>
                    <button
                            class="w-full bg-neutral-800 py-3 text-white text-xl font-bold hover:opacity-30"
                            type="submit"
                            name="clear"
                    >
                        Clear Cart
                    </button>
                </div>

                <div sec:authorize="!isAuthenticated()" class="m-auto my-3">
                    <div>
                        To make a purchase, please
                        <a
                                href="/*"
                                class="underline text-blue-600 hover:text-indigo-800"
                        >Login</a
                        >
                    </div>

                    <!--Link to login-->
                </div>

                <div class="flex p-2 text-xl font-bold justify-between">
                    <div class="mx-2">Total:</div>
                    <p th:text="${totalPrice + '$'}">124$</p>
                </div>
            </form>
        </div>

        <!--Empty bag-->
        <div
                th:unless="${cart.cartDetails.isEmpty()}"
                class="text-2xl w-fit mt-10 mx-auto bg-neutral-100 p-5"
        >
            Bag is empty
            <a class="text-indigo-700 underline hover:text-indigo-800" href="/"
            >make a purchase</a
            >
            <!--Add path to home page-->
        </div>
        <!--End empty bag-->
    </div>
</div>

<!-- <div th:if="${!cart.cartDetails.isEmpty()}">
  <table>
    <tr align="center">
      <th>Picture</th>
      <th>Title</th>
      <th>Size</th>
      <th>Price</th>
      <th>Amount</th>
      <th>Total</th>
      <th>Plus One</th>
      <th>Del One</th>
      <th>Del full</th>
    </tr>
    <tr id="cart" th:each="detail : ${cart.cartDetails}">
      <td><img th:src="@{${detail.linkOfPicture}}" class="image" /></td>
      <td th:text="${detail.title}">Vendor Code</td>
      <td th:text="${detail.size}">Vendor Code</td>
      <td th:text="${detail.price}">Title</td>
      <td th:text="${detail.amount}">Description</td>
      <td th:text="${detail.sum}" align="right">Price</td>
      <th>
        <form th:action="@{shop-cart/incamount}" method="post">
          <input
            type="hidden"
            name="id"
            th:value="${detail.productInstanceId}"
          />
          <input type="hidden" name="size" th:value="${detail.size}" />
          <button type="submit">Plus One</button>
        </form>
      </th>
      <th>
        <form th:action="@{shop-cart/decamount}" method="post">
          <input
            type="hidden"
            name="id"
            th:value="${detail.productInstanceId}"
          />
          <input type="hidden" name="size" th:value="${detail.size}" />
          <button type="submit">Minus One</button>
        </form>
      </th>
      <th>
        <form th:action="@{shop-cart/removeItem}" method="post">
          <input
            type="hidden"
            name="id"
            th:value="${detail.productInstanceId}"
          />
          <input type="hidden" name="size" th:value="${detail.size}" />
          <button type="submit">Del Ful</button>
        </form>
      </th>
    </tr>
  </table>
  <div class="">
    <p th:text="${totalPrice}"></p>
  </div>
</div> -->
</body>
</html>

