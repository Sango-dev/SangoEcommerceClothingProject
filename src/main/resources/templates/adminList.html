<!DOCTYPE html>
<html
        lang="en"
        xmlns:th="http://www.w3.org/1999/xhtml"
>
<head>
    <meta charset="UTF-8" />
    <title>–¢–æ–≤–∞—Ä–∏</title>
    <head th:replace="fragments/header :: header-css"> </head>
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="w-full flex justify-left mx-2 mt-2">
    <div class="mx-2">
        <a
                th:href="@{/product/add-product}"
                class="underline text-indigo-700 cursor-pointer hover:text-indigo-900"
        >–î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</a
        >
    </div>
</div>
<div class="flex justify-end mr-10 text-xl">
    <form th:action="@{/product/admin-list/search-by-code(code)}" method="get">
        <div class="flex items-center border-b border-black">
            <button class="flex-shrink-0 text-xl py-1 px-2" type="submit">
                üîé
            </button>
            <input
                    class="appearance-none bg-transparent border-none w-full mr-3 py-1 px-2 leading-tight focus:outline-none"
                    type="search"
                    placeholder="–ü–æ—à—É–∫ –∑–∞ –∫–æ–¥–æ–º"
                    name="code"
                    style="font-size: 14px;"
                    required
            />
        </div>
    </form>
</div>

<div th:if="${noMatch}" class="text-center">
    <div class="text-3xl font-bold mb-4 mx-auto">
        –¢–æ–≤–∞—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!
    </div>
</div>

<div th:each="product : ${products}" class="my-10">
    <table align="center" width="1500px">
        <thead class="text-xl bg-neutral-100">
        <tr>
            <th>–ö–æ–¥ —Ç–æ–≤–∞—Ä—É</th>
            <th>–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</th>
            <th>–°—Ç–∞—Ç—å</th>
            <th>–¶—ñ–Ω–∞</th>
            <th>–ë—Ä–µ–Ω–¥</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
            <th></th>
        </tr>
        </thead>
        <tbody class="border-b">
        <tr>
            <td align="center" th:text="${product.productCode}">–ö–æ–¥ —Ç–æ–≤–∞—Ä—É</td>
            <td align="center" th:text="${product.title}">–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</td>
            <td align="center" th:text="${product.gender}">–°—Ç–∞—Ç—å</td>
            <td align="center" th:text="${product.price + ' ' + '‚Ç¥'}">–¶—ñ–Ω–∞</td>
            <td align="center" th:text="${product.brand.title}">–ë—Ä–µ–Ω–¥</td>
            <td align="center" th:text="${product.category.title}">
                –ö–∞—Ç–µ–≥–æ—Ä—ñ—è
            </td>
            <td>
                <a
                        align="center"
                        style="font-size: 30px; cursor: pointer; margin: 0; padding: 10px;"
                        th:href="@{/product/{id}/edit-product(id=${product.id})}"
                >‚≠Ø</a
                >
                <a
                        align="center"
                        style="font-size: 30px; cursor: pointer; margin: 0; padding: 10px;"
                        th:href="@{/product/{id}/delete-product(id=${product.id})}"
                >‚ùå</a
                >
            </td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td
                    colspan="10"
                    align="center"
                    id="show-details"
                    class="underline py-3 cursor-pointer hover:no-underline"
            >
                –ü–æ–∫–∞–∑–∞—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏
            </td>
        </tr>
        </tfoot>
    </table>
    <div id="order-list" style="display: none">
        <table align="center" width="800px" class="border">
            <thead class="text-xl bg-neutral-200">
            <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="val : ${product.prodInstIdPic}" class="border-b">
                <td align="center" class="w-[150px] h-auto p-3">
                    <img
                            th:src="@{${val.mainPic}}"
                            src="https://picsum.photos/200/300"
                    />
                </td>
                <td align="center">
                    <a
                            th:href="@{/product/{id}/edit-product-instance(id=${val.id})}"
                            class="underline text-indigo-700 cursor-pointer hover:text-indigo-900"
                    >–ó–º—ñ–Ω–∏—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä</a
                    >
                </td>
                <td align="center">
                    <a
                            th:href="@{/product/{id}/add-size(id=${val.id})}"
                            class="underline text-indigo-700 cursor-pointer hover:text-indigo-900"
                    >–î–æ–¥–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä</a
                    >
                </td>
                <td align="center">
                    <a
                            th:href="@{/product/{id}/remove-size(id=${val.id})}"
                            class="underline text-indigo-700 cursor-pointer hover:text-indigo-900"
                    >–í–∏–¥–∞–ª–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä</a
                    >
                </td>
            </tr>
            </tbody>
        </table>
        <div class="w-full flex justify-center mx-2">
            <a
                    th:href="@{/product/{id}/add-product-instance(id=${product.id})}"
                    class="underline text-indigo-700 cursor-pointer hover:text-indigo-900"
            >–î–æ–¥–∞—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä</a
            >
        </div>
    </div>
</div>
<div th:if="${isSearch}" class="text-center">
    <a
            align="center"
            class="underline py-3 cursor-pointer hover:no-underline"
            th:href="@{/product/admin-list}"
    >
        –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø–æ–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É —Ç–æ–≤–∞—Ä—ñ–≤
    </a>
</div>
</body>
<script>
    const showDetails = document.querySelectorAll("#show-details");
    const orderList = document.querySelectorAll("#order-list");

    const textShowDetails = {
        show: "–ü–æ–∫–∞–∑–∞—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏",
        hide: "–ü—Ä–∏—Ö–æ–≤–∞—Ç–∏",
    };
    const display = {
        flex: "inline",
        none: "none",
    };
    [...showDetails].forEach((item, index) => {
        item.addEventListener("click", () => {
            if (orderList[index].style.display === display.none) {
                orderList[index].style.display = display.flex;
                item.innerText = textShowDetails.hide;
            } else {
                orderList[index].style.display = display.none;
                item.innerText = textShowDetails.show;
            }
        });
    });
</script>
</html>
